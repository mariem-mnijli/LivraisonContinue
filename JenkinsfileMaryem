pipeline {
  agent any 
  stages {
    stage('git checkout') {
      steps {
        git branch : 'master',
        url: 'https://github.com/mariem-mnijli/LivraisonContinue.git',
        credentialsId: '36a181a6-afae-40ee-a825-ed195d7ec139';
        echo 'checkout stage'
           }
  }

 stage("Build") {
            steps {
                sh "ng build --configuration production"
            }
        }
 
 stage("Docker") {
            steps {
                sh "ansible-playbook ansible/docker.yml -i ansible/inventory/host.yml"
            }
        }
 stage('Docker Login'){
            steps{
			
                sh 'docker login -u mariemmnijli -p 203JMT1107'
            }
        }
 stage("Docker-Registry") {
            steps {
                sh "ansible-playbook ansible/docker-registry.yml -i ansible/inventory/host.yml"
            }
        }
  
  }
  }
  
